<!DOCTYPE HTML>


      
[%settitle Форматы%]
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
[%file newheader%]
</head>
<body>
[%file newnavbar%]

<div class="col-9">

<a name="root"> </a>
<h1>Форматы представления ресурсов</h1>
<p>
На этой странице задокументировано, каким образом описываются ресурсы. В реальности ресурсы могут быть представлены в следующих форматах: <a href="xml.html">XML</a> и <a href="json.html">JSON</a>. 
</p>

<h2>Описание ресурсов</h2>
<p>
Ресурсы описываются двумя способами: с помощью UML-диаграммы, содержащей краткое изложение, и с помощью XML-псевдосинтаксиса, дающего визуальное представление о том, как конечные экземпляры ресурса будут выглядеть в формате XML. Обратите внимание, что, хотя описание ресурсов основывается на XML-представлении, другие форматы, например JSON, также допустимы.
</p>
<a name="syntax"> </a>
<h3>XML</h3>
<p>
Синтаксис XML использует следующую систему обозначений:
</p>
<pre class="spec">
 &lt;<b>Name</b> xmlns="http://hl7.org/fhir" (attrA="value")&gt; 
   &lt;<u><b title="Formal Definition (SHALL be supported or understood)">nameA</b></u>&gt;<font color="Gray">&lt;!-- </font><font color="brown">1..1</font> <font color="Darkgreen">type</font> <font color="Navy">description of content</font> <font color="Gray"> --&gt;</font>&lt;nameA&gt;
   &lt;<b title="Formal Definition">nameB[x]</b>&gt;<font color="Gray">&lt;!-- </font><font color="deeppink" title="Condition">0..1</font> <font color="darkgreen">type1</font>|<font color="darkgreen">type2</font> <font color="Navy">description</font> <font color="Gray"> --&gt;</font>&lt;/nameB&gt;
   &lt;<b>nameC</b>&gt; <font color="Brown"><font color="Gray">&lt;!-- </font> <b>1..*</b> --&gt;</font>
     &lt;<b>nameD</b>&gt;<font color="Gray">&lt;!-- </font><font color="brown">1..1</font> <font color="darkgreen">type</font>&gt;<font color="navy">Relevant records</font> <font color="Gray"> --&gt;</font>&lt;/nameD&gt;
   &lt;/nameC&gt;
 &lt;name&gt;
</pre>
<p>
Примечания:
</p>
<ul>
 <li>Имена ресурсов и элементов чувствительны к регистру (хотя дубликаты, различающиеся только регистром, ни разу не вводились).</li>
 <li>Любые элементы, имеющие <a href="datatypes.html#primitive">примитивный тип</a>, будут иметь атрибут value, содержащий фактическое значение элемента.</li>
 <li>У элементов есть показатель множества (cardinality), указывающий, сколько раз этот элемент может или должен появиться. Если множество выделено 
    <font color="deeppink">розовым</font> , значит есть дополнительное условие, влияющее на допустимое множество. Оно доступно в виде всплывающей подсказки при наведении указателя мыши на текст, либо в формальных определениях.</li>
 <li>Если только у элементов нет непосредственно заданных потомков (как у nameC выше), им назначается один или несколько типов. Все эти типы приведены в <a href="datatypes.html">типах данных</a>, за исключением типов "Resource" и "Narrative", которые задокументированы ниже. Имена типов имеют вид гиперссылок.</li>
 <li>Некоторые типы данных, имеющие потомков, могут содержать такой же набор потомков, как и некоторый другой элемент, определенный в этом ресурсе. В этом случае тип элемента содержит ссылку на [path], где [path] - элемент с этим элементом-потомком.</li>
 <li>Когда логический элемент может иметь более одного типа, его имя принимает форму nnn[x]. Часть имени вида "nnn" является постоянной, а [x] заменяется именем его типа с большой буквы, который фактически используется. В XML это будет выглядеть так:
   
   <div class="example">
<pre class="xml">
  &lt;name&gt;
    &lt;nameBType1&gt;
     ... contents for type1 ...
    &lt;/nameBType1&gt;
  &lt;/name&gt;
</pre>
   </div>
Разрешенные типы элемента перечислены через разделитель "|". Когда одним из типов является Resource([X]), имя этого типа в имени элемента указывается просто как "Resource".
   </li>
 <li>Имя каждого элемента в псевдосинтаксисе также является гиперссылкой на формальное определение этого элемента в словаре данных, лежащем в основе форматов обмена. </li>
 <li>Если имя элемента подчеркнуто, то от приложений требуется <a href="conformance-rules.html#mustSupport">поддерживать</a> и/или <a href="conformance-rules.html#ismodifier">понимать</a> его.</li>
 <li>Любые из этих элементов могут иметь атрибут id, служащий  <a href="references.html#idref">целью внутренней ссылки</a>. В этом формате атрибут id не показывается.</li>
 <a name="element-rules"> </a>
 <li>FHIR-элементы не могут быть пустыми. Если элемент присутствует в ресурсе, он ДОЛЖЕН иметь либо атрибут value, либо элементы-потомки, как определено для его типа, либо 1 или более <a href="extensibility.html">расширений</a>.</li>
 <li>Атрибуты не могут быть пустыми. Либо они отсутствуют, либо содержат как минимум 1 символ, не являющийся пробельным.</li>
 <li>В дополнение к этому наглядному синтаксису доступны и другие формы определений, включая W3C-схему и Schematron.</li>
</ul>

<h3>UML</h3>
<p>
На UML-диаграммах изображена та же самая информация в виде последовательности классов, представляющих элементы ресурса.
</p>
<p style="text-alignment: left">
<%svg uml-example%>
</p>
<p>
Там, где у элемента можно выбрать тип данных, это обозначено с помощью вышеописанного XML-синтаксиса. Из-за специфики работы UML, фактический порядок элементов не может быть определен из диаграммы, также не видно, является ли свойство элементом или атрибутом. Элементы и типы являются ссылками на их формальные определения. На UML-диаграммах также показаны связи, они являются гиперссылками на свое описание.
</p>
<p>
Назначение этих UML-диаграмм - донести содержимое ресурса человеку, они не подходят для генерации кода из UML с помощью стандартных инструментов.
</p>




</div>

[%file newfooter%]
</body>
</html>