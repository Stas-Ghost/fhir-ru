<?xml version="1.0" encoding="UTF-8"?>
<Conformance xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://hl7.org/fhir ../../schema/conformance.xsd">
  <id value="example"/>
  <text>
  
    <status value="generated"/>
    <div xmlns="http://www.w3.org/1999/xhtml">
      <p>The EHR Server supports the following transactions for the resource Person: read, vread, 
        update, history, search(name,gender), create and updates.</p>
      <p>The EHR System supports the following message: admin-notify::Person.</p>
      <p>The EHR Application has a <a href="http://fhir.hl7.org/base/Profilebc054d23-75e1-4dc6-aca5-838b6b1ac81d/_history/b5fdd9fc-b021-4ea1-911a-721a60663796">general document profile</a>.</p>
    </div>
  </text>
  <!--  идентификатор этого заявления о соответствии.
	Этот идентификатор и версия устанавливают идентификаторы, которые другие 
	спецификации и проч. могут использовать для ссылки на это заявление о соответствии, 
	и которые этот ресурс представляет скорее логическим способом, чем буквальным (URL)
	
	Этот идентификатор должен быть глобально уникальным - UUID, OID или URL/URI    
   -->
  <identifier value="68D043B5-9ECF-4559-A57A-396E0D452311"/>
  <version value="20130510"/>
  <name value="ACME EHR Conformance statement"/>
  <publisher value="ACME Corporation"/>
  <telecom>
    <system value="email"/>
    <value value="wile@acme.org"/>
  </telecom>
  <description value="This is the FHIR conformance statement for the main EHR at ACME for the private interface - it does not describe the public interface"/>
  <date value="2012-01-04"/>
  <software>
    <name value="EHR"/>
    <version value="0.00.020.2134"/>
  </software>

  <!-- хотя инфраструктура FHIR и переделывается перед разработкой, указание версии обязательно. Обратите внимание, что позже это может быть аннулировано? -->
  <fhirVersion value="0.07"/>
  
  <!-- эта система принимает неизвестное содержимое в ресурсах -->
  <acceptUnknown value="true"/>

  <!-- эта система поддерживает либо xml, либо json. (Перечисление обоих подразумевает полную поддержку каждого с взаимным преобразованием) -->  
  <format value="xml"/>
  <format value="json"/>
  
  <!-- в реальном заявлении о соответствии маловероятно, что отдельное заявление 
  о соответствии будет декларировать соответствие для REST, обмена сообщениями и 
  документов, хотя это и допустимо.
  В этом примере это делается для демонстрации всех частей заявления о соответствии  -->
  <rest>
    <!-- это серверное заявление о соответствии. Обратите внимание, что серверы обязаны предоставлять одно из таких. Его можно легко редактировать вручную - скопируйте его, замените метаданные выше, удалите информацию, относящуюся к обмену сообщениями и документам ниже, затем замените соответствующие данные. -->
    <mode value="server"/>
    <!-- ноль или больше таких записей - объявление поддержки ресурса -->
    <resource>
      <type value="Patient"/>
      <!-- давайте предположим, HL7 поднял реестр профилей на http://fhir.hl7.org/fhir 
        - вполне вероятно, что такой реестр будет, хотя это еще не решено и URL не выбран.
		Это приложение просто использует профиль, зарегистрированных непосредственно 
		в HL7. Для простейшего случая FHIR REST-сервера, просто удалите эту ссылку на профиль. Ссылки на профили не обязательно делать UUID, хотя реестр профилей может ввести такое требование -->
      <profile>
        <reference value="http://fhir.hl7.org/base/Profile7896271d-57f6-4231-89dc-dcc91eab2416"/>
      </profile> 
      <interaction>
        <code value="read"/>
      </interaction>
      <interaction>
        <code value="vread"/>
      </interaction>
      <interaction>
        <code value="update"/>
      </interaction>
      <interaction>
        <code value="history-instance"/>
      </interaction>
      <interaction>
        <code value="create"/>
      </interaction>
      <interaction>
        <code value="history-type"/>
      </interaction>
    </resource>
    <interaction>
      <code value="transaction"/>      
    </interaction>
    <interaction>
      <code value="history-system"/>      
    </interaction>
  </rest>

  <!-- заявление о соответствии для сообщений. Приложениям не требуется делать заявление о соответствии для обмена сообщениями, хотя имеется активная аргументация, что им следует это делать.  -->
  <messaging>
    <!-- как сказать, является ли этот llp сервером или клиентом? -->
    <event>
      <code>
        <system value="http://hl7.org/fhir/message-type"/>
        <code value="admin-notify"/>
      </code> 
      <mode value="receiver"/> <!-- это получатель "receiver" - т. е. ответы. Не обязательно сервер" -->
      <focus value="Patient"/>
      <!-- укажите профиль для запроса пользователя. Очень часто нет смысла в профилировании ответа, это не представляет интереса -->
      <request>
        <reference value="Profile/101"/>
      </request> 
      <response>
        <reference value="Profile/101"/>
      </response> 
    </event>
  </messaging>
  
  <!-- заявление о соответствии для документов -->
  <document>
    <mode value="consumer"/>
    <documentation value="Basic rules for all documents in the EHR system"/>
    <!-- это важный элемент: ссылка на опубликованный профиль документа
	обратите внимание, что это ссылка на конкретную версию.-->
    <profile>
      <reference value="http://fhir.hl7.org/base/Profilebc054d23-75e1-4dc6-aca5-838b6b1ac81d/_history/b5fdd9fc-b021-4ea1-911a-721a60663796"/>
    </profile>
  </document>  
</Conformance>
