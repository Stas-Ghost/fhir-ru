<div xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/1999/xhtml ../../schema/fhir-xhtml.xsd" xmlns="http://www.w3.org/1999/xhtml">


<h2>Примечания к трактовке:<!-- Interpretation Notes: --></h2>

<ul>

<li>Профиль содержит линейный список элементов. Элемент path предоставляет собой полную структуру и ДОЛЖЕН в точности совпадать со структурой ресурса и именами в этой структуре. <!-- 
The profile has a flat list of elements. The path element provides the overall structure and it SHALL match the structure and names in the resource structure exactly. --></li>

<li>Элемент condition используется для объявления о том, что ограничение, определенное на другом элементе, влияет на допустимое кардинальное число этого элемента.<!-- 
The condition element is used to assert that a constraint defined on another element affects the allowed cardinality of this element. --></li>

<li>Элемент type используется для указания, какие типы применяются, когда нижележащий ресурс разрешает выбор типов. Когда тип элемента фиксированный в определениях нижележащего ресурса, его всё ещё следует указывать в профиле. Элемент type является необязательным, так как повторяющиеся группы элементов не имеют типа.<!-- 
The type is used to specify which types apply when the underlying resource allows a choice of types. 
When the type of the element is fixed in the underlying resource definitions, it should still be stated in the profile. The type is optional because repeating groups of elements do not have a type. --></li>

<li>Определение definition (короткое, формальное, комментарии или мэппинги) для элемента предоставляется для того, чтобы профиль ресурса мог показать более конкретное определение для поля в определенном контексте. К примеру, определение нижележащего ресурса может быть "Result value" (итоговый результат), а более конкретное определение ресурса будет "Plasma Cholesterol Test Value". Значение должно быть непротиворечивым по отношению к нижележащему определению, но не может быть более узким, т. е. ограничивать его. <!-- 
The definition (short, formal, comments and the mappings) for an element is provided so that the resource profile can provide a more specific definition for the field in a specific context. 
  For instance, the underlying resource definition might be "Result value" and the more specific resource definition could be "Plasma Cholesterol Test Value".
  The meaning needs to be consistent with the underlying definition, but can be narrower - a constraint on it. --></li>
  
<li>Для элемента с максимальным кардинальным числом 1 может быть только одна запись в списке значений, которая является либо буквальным фиксированным типом (с именем элемента, совпадающим с типом этого фиксированного значения), либо именем, которое является ссылкой на именованный шаблон ограничения (constraint). Если у элемента максимальное кардинальное число &gt;1, тогда может иметься несколько значений - и снова это будут либо фиксированные значения с типом, либо именованные ограничения. Каждый из них появляется в списке с указанием порядка и кардинального числа. С их помощью список может быть "разбит" (sliced) на ряд различных компонентов.<!-- 
For an element with a maximum cardinality of 1, there can only be one entry in the value list, which is either a literal fixed type (with an element name matching the type of the fixed value) or a name,
  which is a reference to a named constraint pattern. If the element has a maximum cardinality of &gt;1, then there can be multiple values - again, either fixed values with a type or a named constraint. 
  Each of these appears in the list with the order and cardinality specified. By this means, a list may be "sliced" into a series of different components. --></li>

<li>Для каждого элемента пути может иметься больше одной записи. Спецификация ограничения может вводить множество различных ограничений для любого элемента и затем использовать их в различных местах. На практике это полезно, когда разбивают список и по-разному называют профили ограничений, дифференцируемые с помощью элемента <i>value[x]</i>. Имя ограничения элемента ДОЛЖНО быть уникальным в пределах спецификации ограничения для ресурса. Если ограничение не имеет имени, оно применяется к базовому ресурсу и ДОЛЖНО находиться в корректном месте в структуре.<!-- 
There can be more than one entry for each element path. The constraint specification can define multiple different constraints for any element and 
  then use them in different places. In practice, this is useful when slicing a list and the differently named constraint profiles are differentiated using the 
  <i>value[x]</i> element. The name of the element constraint SHALL be unique within the constraint specification for that resource. If a constraint does not 
  have a name, it applies to the base resource and SHALL be found in the correct place in the structure. --></li>
<li>Значение Closed существенно, только если лежащий в основе элемент имеет максимальное кардинальное число  > 1.<!-- Closed is only relevant if the underlying element has a max cardinality > 1. --> </li> 
<li>
Для определения расширения, ограничения по кардинальному числу являются пределами ограничений любой ссылки на это расширение в профиле. К примеру, если минимальное кардинальное число расширения 1, когда оно определено, тогда любой профиль, который включает это расширение в экземпляр, ДОЛЖНО включать его с минимальным кардинальным числом 1 и, следовательно, любой экземпляр, который соответствует этому профилю, ДОЛЖЕН включать это расширение. Обратите, однако, внимание, что если вместо применения профиля в экземпляре имеется непосредственно ссылка на расширение, то минимальное кардинальное число не применяется, хотя максимальное продолжает применяться.
<!-- For an extension definition, the cardinality constraints are limits on the constraints of any reference to the extension in a profile. 
For example, if the minimum cardinality of an extension is 1 when it is defined, then any profile that includes that extension in the instance
SHALL include it with a minimum cardinality of 1 and therefore any instance that conforms to the profile SHALL include the extension. Note, however,
that if the extension is  directly referenced in an instance rather than applied through a profile, the minimum cardinality doesn't apply, 
though the maximum one still does. -->
</li>  
<li>Для xpath-ограничений префикс "f" должен использоваться для "http://hl7.org/fhir", и "h" для "http://www.w3.org/1999/xhtml". XPath-ограничения пишутся для XML-представления, однако ДОЛЖНЫ быть истинными и для других представлений тоже.<!-- For xpath constraints, the prefix "f" should be used for "http://hl7.org/fhir", and "h" for "http://www.w3.org/1999/xhtml". XPath constraints are written against the XML representation, but SHALL be true in any other representation as well --></li>
<li>Когда для создания ограничений на взаимосвязи между содержимым описательной части и содержимым элементов данных используется xpath, то элемент, по отношению к которому выражено правило, и будет тем, о котором будет сообщаться в ошибке или предупреждении. 
<!-- When using xpath to make constraints about the relationship between the contents of the narrative and the contents of the data elements, 
  the element against which the rule is expressed is the one against which the error or warning will be reported. --></li>
</ul>

<h3>Распространенные цели мэппинга<!-- Common Mapping Targets --></h3>
<p>
Профили могут связывать элементы ресурса с концептами в других системах определений. Как правило, они используются для мэппинга элементов на локальные модели реализации, пути данных и концепты. Однако, они также используются для мэппинга на другие стандарты и общедоступные справочники. Далее перечислены стандартные URI, используемые в общих целях мэппинга:
<!-- Profiles are able to map resource elements to concepts in other definition systems. Generally these are used to 
map the elements to local implementation models, data paths, and concepts. However they are also used to map
to other standards and published terminologies. These are the standard URIs used for common targets of the 
mapping: -->
</p>

<table class="lines">
  <tr><td>http://loinc.org</td><td>LOINC code for the element</td></tr>
  <tr><td>http://snomed.info</td><td>SNOMED CT code for the element</td></tr>
  <tr><td>http://hl7.org/v3</td><td>RIM mapping</td></tr>
  <tr><td>http://hl7.org/v2</td><td>v2 mapping</td></tr>
  <tr><td>http://nema.org/dicom</td><td>DICOM tag mapping</td></tr>
  <tr><td>http://w3.org/vcard</td><td>vCard equivalent field</td></tr>
  <tr><td>http://ihe.net/xds</td><td>XDS metadata equivalent</td></tr>
</table>

<h2>Профилированный FHIR<!-- Profiled FHIR --></h2>
<p>
Если профиль недвусмысленный, тогда средства профилирования FHIR (ссылка должна быть предоставлена, когда эти инструменты появятся) могут сгенерировать эталонную реализацию, основанную на моделях объектов, которые выражают профилируемую модель изначально, где объектный интерфейс не включает запрещенные элементы, обрабатывает заявленные расширения как первичные свойства и разбивает списки в соответствии с этим профилем. Это упрощает груз, лежащий на реализаторах, хотя эта объектная модель может быть использована только с подмножеством возможных ресурсов. 
<!-- If a profile is unambiguous, then the FHIR profile tooling (ref to be provided when the tooling exists) 
is able to generate reference implementation based object models that express 
the profiled model natively, where the object interface does not include 
prohibited elements, treats declared extensions as primary properties and 
slices lists according to the profile. This eases the burden on an implementer, 
though this object model can only be used with a sub-set of the possible resources. <!--only if it enforces maxOccurs.  Extra elements can be mapped into extensions --> -->
</p>
<p>
Эти инструменты также могут выполнять двунаправленные преобразования между <a href="formats.html">обычным XML-форматом</a> и XML-представлением этой профилированной объектной модели и схемой для этой профилированной XML-представления. Эта XML-форма имеет расширения, повышенные до первичной XML-формы с помощью использования кода расширения в качестве XML-имени, а разбитые списки переименовываются для использования Profile.resource.element.name в качестве имени XML-элемента. Профили подходят для этого, только если они гарантируют отсутствие конфликта имен расширений, когда пространства определений расширений игнорируются, и что разбитые списки имеют соответствующие имена.
<!-- The tooling is also able to generate bi-directional transforms between the 
<a href="formats.html">normal XML format</a> and an XML representation of this 
profiled object model and schema for this profiled XML representation. 
This XML form has extensions promoted into the primary XML form by using the 
extension code as the XML name and sliced lists are renamed to use the 
Profile.resource.element.name as the XML element name. Profiles are only suitable
for this use if they ensure that there are no clashing extension names when
the extension definition spaces are ignored and that the sliced list names are 
appropriate.<!-- Any reason we limit this to only XML? - because transforms are XML things --> -->
</p>

<p>
Реализациям позволяется обмениваться этим профилированным XML-форматом. Реализации, делающие это, не полностью соответствуют FHIR; вместо этого они могут заявлять о соответствии "Profiled FHIR". Реализациям следует всё тщательно взвесить перед тем, как принимать этот подход; в то время как он уменьшает количество требуемой работы по изначальной реализации конкретных профилей, он увеличивает объем работы, требуемой для обмена этими данными с другими сообществами или для повторного использования инструментария и приложений, которые используются также и в других контекстах. Цена этого подхода должна быть детально рассмотрена в свете того факта, что обговоренный ранее инструментарий позволяет создавать приложения, как будто они имеют дело с "Profiled FHIR"-экземплярами, когда на самом деле они отправляют и получают полностью соответствующие FHIR экземпляры.
<!-- 
Implementations are allowed to exchange this profiled XML format. Implementations
that do so are not fully conformant to FHIR; instead they can claim to be conformant
to "Profiled FHIR". Implementations should consider carefully before adopting this 
approach; while it will reduce the amount of work required to initially implement 
particular profiles, it will increase the amount of work required to exchange this
data with other communities or to re-use tooling and applications that are also 
used in other contexts. This cost should particularly be considered in light of the
fact that the previously discussed tooling allows applications to be written as 
though they are dealing with "Profiled FHIR" instances when they are in fact sending
and receiving fully conformant FHIR instances. -->
</p>

</div>
