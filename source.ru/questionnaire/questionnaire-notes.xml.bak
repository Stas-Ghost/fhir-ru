<div xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/1999/xhtml ../../schema/fhir-xhtml.xsd" xmlns="http://www.w3.org/1999/xhtml">

<a name="notes"> </a>
<h2>
Примечания:
</h2>
<ul>
<li>Вопросники можно использовать для представления предопределенных форм или панелей, обращаясь к ним с помощью Questionnaire.group.concept.
<!-- Questionnaires may be used to represent predefined forms or panels, referenced using Questionnaire.group.concept. --></li>
<li>Содержимое вопросника размещается внутри его единственной вложенной группы, которая может содержать вопросы или подгруппы с вопросами.
<!-- A Questionnaire's contents are placed inside its single nested Group, which may contain Questions or subgroups with Questions. --></li>
<li>Группы и вопросы могут иметь linkIds, позволяющие собирать ответы на группы и вопросы в <a href="questionnaireresponse.html">QuestionnaireResponse</a>, для связи с соответствующей группой или вопросом.
<!-- Groups and Questions may have linkIds allowing groups and question answers captured in a <a href="questionnaireresponse.html">QuestionnaireResponse</a>
to be associated with their corresponding group or question. --></li>
<li>Questionnaire позволяет гибкое именование и структуризацию своего содержимого с учетом гибкого и изменяющегося характера форм и вопросников.
Он не пытается явным образом стандартизировать или рационализировать обмен своим содержимым вне своего контекста использования, хотя участники такого обмена могут еще больше ограничить его структуру и гибкость, используя профили для определения стандартных, многократно используемых форм.
<!-- Questionnaire allows for flexible naming and structuring of its contents to reflect the flexible and varying nature of forms and questionnaires. 
It explicitly does not try to standardize or streamline exchange of its contents outside its context of use, although exchanging partners may further
constrain its structure and flexibility using profiles to define standardized, reusable forms. --></li>
<li>Из-за отсутствия явной поддержки вопросников в <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=186">HL7 v3</a>, <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=7">CDA</a> документы часто использовали именованные разделы с Observations для моделирования Questionnaires. Сейчас вместо них в таких сценариях следует использовать ресурс Questionnaire.
<!-- Because of the lack of explicit support for Questionnaires in <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=186">HL7 v3</a>, <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=7">CDA</a> Documents frequently used named sections with
Observations to model Questionnaires. Such use cases should now utilize the Questionnaire Resource instead. --></li>
<li>Порядок вопросов в группах, групп внутри групп и групп в вопросах является актуальным и должен сохраняться при отображении и вводе.
<!-- The order of questions within groups, groups within groups and groups within questions is relevant and must be retained for display and capture. --></li>
</ul>

<a name="qversusr"> </a>
<h3>Использование вопросников по сравнению с использованием других ресурсов<!-- Using Questionnaires versus using Resources --></h3>
<p>
Имеется значительное совпадение между информацией, охватываемой <b>Questionnaires</b> и другими ресурсами (в частности <a href="familymemberhistory.html">FamilyMemberHistory</a>,
<a href="medicationstatement.html">MedicationStatement</a>, <a href="observation.html">Observation</a>, <a href="procedure.html">Procedure</a> и др.): 
Гибкой структурой <b>вопросника</b> легко можно злоупотребить для захвата всех данных подряд, даже тех данных, которые должны сохраняться в виде отдельных ресурсов. Выбор между использованием <b>вопросников</b> или отдельных ресурсов может быть продиктован процедурой сбора и записи. Например, если данные собираются с помощью согласованной с врачом (электронной) формы, может быть невозможно или нежелательно извлекать из нее отдельные ресурсы, и получение данных через <b>Questionnaire</b> будет наиболее подходящим.
<!-- There is considerable overlap between the information covered by <b>Questionnaires</b> and other Resources (especially <a href="familymemberhistory.html">FamilyMemberHistory</a>,
<a href="medicationstatement.html">MedicationStatement</a>, <a href="observation.html">Observation</a>, <a href="procedure.html">Procedure</a>, etc.): 
<b>Questionnaire's</b> flexible structure can easily be misused to capture any data, even data that should be captured as separate Resources. The choice between using <b>Questionnaires</b> or separate 
Resources may be dictated by the procedure of collection and recording; e.g. if the data is captured as a physician-agreed (electronic) form, it might be impossible or undesirable to 
distill separate resources from it and capturing the data in a <b>Questionnaire</b> would be most appropriate. -->
</p> 

<p>
Тем не менее данные, полученные с помощью <b>Questionnaires</b>, может быть трудно обрабатывать запросами постфактум. Запросы к другим ресурсам не вернут данные, полученные только с помощью <b>Questionnaires</b>, а запросы непосредственно к <b>Questionnaires</b> могут не найти все необходимые данные в зависимости от того, как вопросы будут формулироваться, кодироваться с течением времени или разными клиницистами.
Кроме того, совместимость таких <b>Questionnaires</b> ограничена, так как интерпретация их содержимого известна только ограниченному кругу лиц, которые участвовали в их определении: кодирование данных из таких <b>Questionnaires</b> с помощью более специфичных ресурсов увеличивает доступность содержащейся в них информации.
</p> 

<p>Вполне возможна такая ситуация, что данные будут существовать одновременно в QuestionnaireResponse и в других ресурсах. Например данные могут быть зафиксированы в <a href="questionnaireresponse.html">QuestionnaireResponse</a> в рамках входящего вопросника. Затем эти данные могут быть переданы в ресурсы <a href="patient.html">Patient</a> (демографические данные), <a href="familymemberhistory.html">FamilyMemberHistory</a>, <a href="allergyintolerance.html">AllergyIntolerance</a>, 
<a href="medicationstatement.html">MedicationStatement</a> и <a href="observation.html">Observation</a>, чтобы к ним можно было в дальнейшем обращаться и анализировать. Исходный экземпляр <a href="questionnaireresponse.html">QuestionnaireResponse</a> может быть сохранён в целях контроля. Если нужно, можно использовать ресурс <a href="provenance.html">Provenance</a> для идентификации Questionnaire в качетве источника данных для других ресурсов. Например, если пункт вопросника спрашивает "какой у вас вес", может быть создан ресурс <a href="observation.html">Observation</a> с соответствующим кодом в элементе <code>Observation.code</code> и сообщённым ответом, записанным в элемент <code>Observation.valueQuantity</code>.
</p>

<h3>Структура вопросника</h3>
<p>
Вопросник строится из двух компонентов, Questionnaire и item:</p>
<ul>
  <li>Основным компонентом является Questionnaire, который содержит такую информацию <em>о</em> вопроснике, как идентификатор, издатель, дата создания, название и т. п. Questionnaire содержит ноль или несколько элементов item, которые задают содержимое вопросника (отсутствие элементов item позволяет создавать вопросники с одной только описательной частью, хотя они передают мало вычисляемой информации).</li>
  <li>Элементы item могут быть одного из трех подтипов, задаваемых в элементе <code>type</code>:
    <ul>
      <li><b>display</b> элементы item с типом display передают текст для отображения на форме, не предназначенный для ввода данных и не содержащий вложенных элементов item. Используются для информации об авторских правах и авторстве, инструкций и другой вспомогательной информации.</li> 
     <li><b>group</b> элементы item с типом group огранизауют соедржимое вопросника в разделы, подразделы и т.д. У групп нет ассоциированных с ними напрямую ответов, но они обычно содержат вложенные элементы item с типом 'question', у которых такие ответы есть.</li>
     <li><b>question</b> элементы item с типом question содержат определенный вопрос, на который можно дать ответ. Нет единого типа для элементов-вопросов. Вместо этого элемент type передает тип данных ответа на вопрос. Если элемент item имеет тип не 'display' и не 'group', тогда это вопрос, который позволяет собирать ответ определенного типа. Также вопросы могут иметь вложенное содержимое - группы и/или другие вопросы. Таким образом можно моделировать "панели" вопросов, которые будут иметь смысл (и отображаться) только в зависимости от ответа на родительский вопрос; например вопрос "Получал ли пациент лечение в течение последних шести месяцев?" будет содержать вложенную группу вопросов для получения более подробной информации об этом лечении. См. <a href="questionnaire-example-bluebook.xml.html">пример</a> из <a href="http://www.health.nsw.gov.au/Kids/Publications/my-personal-health-record.pdf">Australian New South Wales blue book</a> ("синяя книга" является официальным докладом правительства или реестром статистики - прим. пер.)</li>
    </ul>
  </li>
</ul>
<p>
Конкретные элементы управления динамического отображения групп, вопросов и т. п. на основе ответов на другие вопросы выходят за рамки базового ресурса и, как ожидается, будут введены в качестве расширений.</p>

<h3>Идентификаторы внутри Questionnaire</h3>
<p>В ресурсе Questionnaire есть три различных идентифицирующих элемента: <code>identifier</code>, <code>id</code> и <code>linkId</code>. Каждый из них имеет своё назначение:</p>
<ul>
  <li><b>identifier</b> используется, чтобы ссылаться на весь вопросник в целом в условиях деловой деятельности. Это номер, напечатанный наверху формы или рядом с ней, когда делается выбор между альтернативными формами.</li>
  <li>Атрибут <b>id</b>, поддерживаемый для каждого элемента, используется для ссылок в пределах ресурса, например для связывания описательной части с соответствующим дискретным элементом. Ids are not generally displayed to end users</li>
  <li>Элемент <b>linkId</b> в вопросах и группах устанавливает связь между элементами в <a href="questionnaireresponse.html">QuestionnaireResponse</a> и их определениями в Questionnaire. Это <i>единственный</i> способ связи между группами и вопросами в Questionnaire и QuestionnaireResponse. These are also not displayed to end users</li>
</ul>

<h3>Определения вопросов<!-- Question Definitions --></h3>
<p>
Вопросники можно наполнить любыми вопросами, которые задумает автор, и могут быть сформулированы в любой подходящей или удобной форме. Однако стандартизация вопросов и введение ограничений, действующих на прилагаемые ответы, увеличивает возможность сравнения данных, собранных через вопросники. Есть два механизма, определённые в спецификации, для связывания вопроса (или группы) со стандартным определением:
Items can be directly linked to an <a href="elementdefinition.html">ElementDefinition</a> using <code>Questionnaire.item.definition</code>
which provides details for the item. If a definition is provided, then the following element values can be derived from the definition: 
</p>
<ul>
<li>concept (from ElementDefinition.code)</li>
<li>type (from ElementDefinition.type)</li>
<li>required (from ElementDefinition.min)</li>
<li>repeats (from ElementDefinition.max)</li>
<li>maxLength (from ElementDefinition.maxLength)</li>
<li>options (from ElementDefinition.binding)</li>
</ul>
<p>
Any information provided in these elements overrides the information from the definition.
The url refers to a an ElementDefinition in either a <a href="structuredefinition.html">StructureDefinition</a> or 
a <a href="dataelement.html">DataElement</a>, and always starts with the canonical URL for the target resource. 
When referring to a StructureDefinition, a fragment identifier is used to specify the element definition by its 
id (Element.id). E.g. http://hl7.org/fhir/StructureDefinition/Observation#Observation.value[x]. In the absence 
of a fragment identifier, the first/root element definition in the target is the matching element definition. 
</p>
<p>
Note that <a href="loinc.html#dataelements">LOINC codes</a> implicitly define DataElement resources.
</p>
<p>
The definitions may also be used to automatically pre-populate answers, or extract data from a corresponding <a href="questionnaireresponse.html">QuestionnaireResponse</a> resource.
</p>
<p>
ПРИМЕЧАНИЕ: даже если дается ссылка на стандартные определения вопроса, такую информацию, как текст вопроса, тип данных и набор значений все равно СЛЕДУЕТ объявлять для вопроса. Системы, выполняющие обработку вопросника, могут не иметь доступа или поддержки возможности поиска определений вопросов во внешних источниках. Если информация не содержится внутри вопросника, другие системы могут быть не в состоянии отобразить или использовать такой вопросник.
<!-- NOTE: Even if a standard question definition is provided, information such as the question text,
data type and value set SHOULD still be declared for the question.  Systems processing the questionnaire may not have access to or support the ability to look
up the question definitions from external sources.  If the information is not included in-line within the questionnaire, other systems may not be able to to render
or use the Questionnaire. -->
</p>
<p>
Если внешнее определение включено наряду с информацией о вопросе, такой как текст вопроса, тип данных или набор значений, ожидается, что содержимое вопроса и определение, на которое дается ссылка, будут согласованы между собой. Однако FHIR не диктует требований к степени согласованности. Например должен ли текст вопроса точно совпадать? Обоснованно ли ограничивать набор допустимых значений возможных ответов на вопрос? Эти правила будет необходимо устанавливать непосредственно в среде реализации.
<!-- If an external definition is included along with question information such as question text, data type or
value set, it is expected that the content for the question and the referenced definition would be in alignment.  However, FHIR does not dictate what degree of
alignment is required; e.g. Does the question text need to match exactly?  Is it legitimate for a question to constrain the allowed value set of possible answers?
These rules will need to be established within implementation environments. -->
</p>

<h3>Типы вопросов<!-- Question types --></h3>
<p>
Коды типов данных для каждого вопроса немного отличаются от типов данных, доступных для ресурса <a href="questionnaireresponse.html">QuestionnaireResponse</a>.
Там, где имена совпадают (игнорируя регистр), "ответ" должен быть указанного типа. Там, где имена отличаются, используется следующая таблица соответствий:
<!-- The codes for the data type for each question are slightly different than the data types allowed in the <a href="questionnaireresponse.html">QuestionnaireResponse</a> resource.
Where the names are the same (ignoring case), the "answer" must use the specified type.  Where the names are different, the mappings are as follows: -->
</p>
<table>
  <tbody>
    <tr>
      <th>Код формата ответа вопросника<!-- Questionnaire AnswerFormat code --></th>
      <th>Тип данных ресурса QuestionnaireResponse<!-- QuestionnaireResponse data type --></th>
    </tr>
    <tr>
      <td>text</td>
      <td><a href="datatypes.html#string">string</a></td>
    </tr>
    <tr>
      <td>url</td>
      <td><a href="datatypes.html#uri">uri</a></td>
    </tr>
    <tr>
      <td>choice</td>
      <td><a href="datatypes.html#Coding">Coding</a></td>
    </tr>
    <tr>
      <td>open-choice</td>
      <td><a href="datatypes.html#Coding">Coding</a> (if choosing from one of the listed choices) or <a href="datatypes.html#string">string</a> (if a different value is provided)</td>
    </tr>
  </tbody>
</table>

<a name="choices"> </a>
<h3>Разрешённые значения ответов на вопросы<!-- Permitted values for questions --></h3>
<p>
Многие вопросники ставят ограничения на перечень допустимых значений на приведённый вопрос. FHIR поддерживает эту возможность с помощью элемента <code>item.options</code> или
<code>item.option</code>.<!-- Many questionnaires place constraints on the allowed list of values for a given question.  FHIR supports this notion through the <code>item.options</code> or the
<code>item.option</code> element. -->
</p>
<p>
Механизм "option" очень прост: все опции перечисляются прямо внутри вопроса с помощью элемента <code>item.option</code>. Поддержка набора разрешённых ответов на вопросы входит в поддержку самого вопросника.
</p>
<p>
Механизм "options" более сложный. Вместо прямого перечисления вариантов выбора, в элементе <code>item.options</code> указывается ресурс <a href="valueset.html">ValueSet</a>. Такой подход усложняет вопросники с простыми списками строк в качестве вариантов выбора ответов на вопрос, однако предоставляет некоторые преимущества, включая:
</p>
<ul>
  <li>Вопросники, которым необходимо использовать коды из внешних кодовых систем, получают такую возможность.</li>
  <li>Наборы ответов можно использовать совместно между несколькими вопросами (и есть много вопросников, где эта возможность очень полезна).</li>
  <li>Все возможности наборов значений могут быть приведены в действие, включая возможность использовать ConceptMap для связывания и перевода из специфичных для вопросника кодов в другие коды, использование множественных имён для отображения (например для различных языков), возможность применять кодированные порядковые числа, и возможность допускать выбор из больших наборов значений (например "все SNOMED CT-коды процедур"). </li>
</ul>
<p>
В большинстве случаев набор кодов на выбор будет специфичным для данного вопросника и должен поддерживаться в рамках этого вопросника. В этом случае ValueSet, на который ссылается вопросник, может быть <a href="references.html#contained">вложенным</a> ресурсом. Все вложенные ресурсы ValueSets собираются в список, на который затем отдельные вопросы ссылаются по необходимости. Альтернативно этому, элемент <code>item.options</code> может ссылаться на набор значений с указанием версии. Это гарантирует, что Questionnaire не начнет использовать новую версию референсного набора значений без перепроверки, что ресурс Questionnaire ссылается на эту новую версию - что дает управление за любыми изменениями в руки автора этого Questionnaire.
</p>

<h3>Полезные наборы значений<!-- Useful Value Sets --></h3>
<p>Для многих вопросов имеются наборы возможных кодов ответов. Эти наборы значений могут быть полезны, и если на них даётся полная URL-ссылка, то их можно не предоставлять в рамках вопросника:
<!-- Many questions have a set of possible codes for their answer. These value sets may be useful to help,
and when referenced by full URL, do not need to be provided as part of the questionnaire: -->
</p>
<ul>
 <li><a href="valueset-example-yesnodontknow.html">Да | Нет | Не знаю</a>: http://hl7.org/fhir/ValueSet/yesnodontknow</li>
<!--  <li><a href="valueset-example-yesnodontknow.html">Yes | No | Don't Know</a>: http://hl7.org/fhir/ValueSet/yesnodontknow</li> -->
</ul>

<h3>Вопросы с несколькими типами ответов<!-- Questions with multiple answer types --></h3>
<p>
В некоторых вопросниках можно отвечать на вопрос с несколькими типами ответов. Например ввод кодированного ответа плюс произвольный текст, ввод кодированного значения плюс числовой приоритет и т. п. В FHIR это реализуется с помощью вложенных вопросов. У каждого вопроса есть отдельный тип данных. Однако каждый вопрос может иметь вложенные дочерние вопросы. Эти вложенные дочерние вопросы могут содержать текст (например "Пожалуйста, конкретизируйте"), либо могут не иметь текста вообще, если надлежащие инструкции указаны в родительском вопросе или группе.
<!-- In some questionnaires, it may be possible to respond to a question with multiple types of answers.  For example, capturing a coded answer plus free text,
capturing a coded value plus a numeric priority, etc.  In FHIR, this is handled through nested questions.  Each question has a single data type.  However,
each question can have nested child questions.  These nested child questions can have text (e.g. "Please specify") or can have no text at all if the appropriate
guidance is provided by the parent question or group. -->
</p>

<h3>Вопросники и математические вычисления<!-- Questionnaires with Math --></h3>
<p>
Хотя они ещё не определены на международном уровне, можно создать расширения, чтобы производить математические вычисления над ответами на вопросники. Например сведение в таблицу очков. Одно из расширений, которое уже определено и может быть полезно для такой обработки вопросников, это расширение Ordinal (Порядковое числительное). Оно позволяет связывать числовое значение с закодированным элементом данных. Имеются два расширения - одно для определения числового веса кода, определённого в наборе значений - <a href="extension-valueset-ordinalvalue.html">valueset-ordinalValue</a>, другое - это код, который может появиться внутри самого Кодинга - <a href="extension-iso21090-co-value.html">iso21090-CO-value</a>.
<!-- While not defined (yet) at the international level, extensions may be defined to perform mathematical functions on questionnaire responses.  For example,
tabulating scores.  One extension that is defined that may be useful in this process is the Ordinal extension.  This allows a numeric value to be associated with a
coded data element.  There are two extensions defined - one for defining the numeric weighting of a code defined in a value set - 
<a href="extension-valueset-ordinalvalue.html">valueset-ordinalValue</a> and the other is a code that can appear within a Coding itself - 
<a href="extension-iso21090-co-value.html">iso21090-CO-value</a>. -->
</p>
<h3>Расширения для предоставления дополнительных возможностей<!-- Extensions for Additional capabilities --></h3>
<p>
Основных элементов, определенных для ресурса questionnaire, достаточно для создания простых вопросников. Для более сложных вопросников создано несколько общих расширений в профилях <a href="questionnaire-extensions.html">Questionnaire Core extensions</a> и <a href="element-extensions.html">Element extensions</a>. Например строгий контроль допустимого количества условий, условное отображение содержимого вопросов и т. д. Расширение условного отображения [enable-when] можно использовать для вложенных в вопрос групп, где требуется более сложное поведение, когда после выбора некоторого ответа появляются новые вопросы.
<!-- The core elements defined in the questionnaire resource are sufficient for simple questionnaires.  For more sophisticated capabilities, a number of "common" extensions
are defined in the <a href="questionnaire-extensions.html">Questionnaire Core extensions</a> and the <a href="element-extensions.html">Element extensions</a> profiles.  
For example, strict control over allowed number of conditions, conditional display of questionnaire content, etc. The conditional display extension [enable-when] can
be used to enable groups nested beneath a question based on the selection of a specific answer, giving the behavior of "questions under answers" where this sort of
more sophisticated behavior is needed. -->
</p>
</div>
