<!DOCTYPE HTML>

      
[%settitle Использование ресурсов в сервисах%]
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
[%file newheader%]
</head>
<body>
[%file newnavbar%]

<div class="col-9">


<a name="SOA"> </a>
<a name="soa"> </a>
<h2>Использование ресурсов в сервисах</h2>
<p>
Хотя FHIR-ресурсы и создавались первоначально для  <a href="http.html">RESTful реализации на основе HTTP</a>, не обязательно использовать RESTful-интерфейс при обмене ресурсами; один из способов обмена - это сервисы. Сервис-ориентированная архитектура (SOA) - это архитектурный шаблон с использованием сервисов для инкапсуляции и предоставления дискретных кусочков функциональности приложения друг другу. Сервисы обмениваются информацией с помощью вызова публичных интерфейсов и обмена информацией (как параметрами и выходными данными) в соответствии с хорошо определенным контрактом сервисов.
</p>
<p>
FHIR-ресурсы или <a href="extras.html#bundle">комплекты</a> могут использоваться в качестве параметров или выходных данных интерфейсов сервисов.
</p>
<p>
В основном определение отдельных сервисов - это предметно- или контекстно-специфичная задача, и ожидается, что это будет сделано в виде отдельных спецификаций, которые используют основополагающие возможности, введенные в данной спецификации. Сервисы, определенные как этот, умеют строить на общих базовых функциях платформы, определенных в этой спецификации, таких как REST или обмен сообщениями, и добавлять специфические взаимодействия в случае необходимости. Кроме того, сервисные интерфейсы могут построить совершенно отдельную реализацию. Сейчас FHIR не определяет каких-либо конкретных сервисных интерфейсов как часть спецификации, хотя согласование с определениями сервисных интерфейсов, предусмотренных 
<a href="http://hssp.wikispaces.com/">рабочей группой HL7 SOA</a>, будут рассмотрены при наличии достаточной заинтересованности в этом.
</p>
<blockquote>
<p>
<b>DSTU-предупреждение</b>: RESTful-интерфейс - это профиль к существующей <a href="http://hssp-rlus.wikispaces.com/RLUS_FAQ">HL7/OMG HSSP 
RLUS спецификации</a> (см. <a href="http.html#hdata">комментарии к RESTful-спецификации</a>). 
Если будет проявлен интерес, HL7 может установить этому SOAP-эквивалент. Основная заинтересованность в этом будет обеспечиваться общей технической базой для других сервисов на основе SOAP.
</p>
</blockquote>
<p>
При реализации обмена ресурсами с использованием подхода на основе сервисов, необходимо иметь в виду два аспекта:
</p>
<ul>
 <li>Технические требования при обмене ресурсами</li>
 <li>архитектурные вопросы FHIR, которые следует учитывать при использовании сервисов</li>
</ul>
<p>
Оба эти аспекта влияют на то, каким образом сервисы должны управлять обменом ресурсами в их разработке и реализации.
</p>

<a name="tech"> </a>
<h2>Технические требования</h2>
<p>
Ресурс состоит из идентификатора, некоторых метаданных, описательной части и данных.
При использовании ресурсов в сервисах контексту использования будет необходимо описывать способ обращения с этим идентификатором и метаданными.
</p>
<p>
Ключевым вопросом в связи с этим является нужно ли ресурсам, которыми обмениваются через сервисный интерфейс, также обрабатываться в RESTful-контексте этого сервиса. К примеру, сервис, обеспечивающий поддержку принятия решений, мог бы получить коллекцию ресурсов, на основе которых требуется принять решение, и использовать внутренний RESTful-сервис для хранения и доступа к ним. В таком случает было бы необходимо забрать ресурсы из контекста сервиса и использовать их в RESTful-контексте, и, как правило, по прошествии длительного времени сервис будет ожидать увидеть дубликаты ресурсов, версиями которых надо будет корректно управлять. Если ресурсами для обмена с помощью сервисов также планируется обмениваться через REST, метаданные потребуют тщательного управления.
</p>
<p><b>Resource Identity</b></p>
<p>
Все ресурсы имеют единый тип (a single identity) (полный URL) и логический идентификатор, который может сохраняться при движении ресурса с сервера на сервер (см. <a href="managing.html">"Managing Resource Identity"</a> для дальнейшего обсуждения). Так как это обозначение используется всеми ссылками на ресурс, оно должно обмениваться вместе с ресурсом так, чтобы ссылки из других ресурсов на тот, которым обмениваются, всё ещё могли быть разрешены.
</p>
<p>
В связи с этим, ресурсы - это модульные блоки, ссылающиеся друг на друга. Несмотря на то, что ресурсы автономны и каждый обрабатывается независимо, вряд ли возможно использовать ресурс для достижения каких-то клинических или бизнес-целей без извлечения других связанных ресурсов. Любое использование ресурсов в сервисной среде требует обратить внимание на то, как эти ссылки будут разрешаться. Этого можно достигнуть делегированием разрешения ссылок RESTful-фреймворку; гарантией, что все существенные ресурсы содержатся в вызове сервиса; или путем некоторой договоренности, основанной на сервисе, по которой дополнительные ресурсы могут быть извлечены.
</p>
<p>
Сервисы, которые обмениваются ресурсами, ДОЛЖНЫ поддерживать тип ресурса (resource identity).
</p>

<p><b>Resource Version</b></p>
<p>
У ресурсов есть два элемента метаданных, связанных с версионированием: "Version Id" и "Last Modified Date". Из-за проблем разрешения даты/времени системам, реализующим  решения параллелизма настоятельно рекомендуется зависеть от идентификатора версии; Last Modified Date предоставляется для сообщения человеческих пользователей об актуальности информации.
</p>
<p>
Обычно сервисы предполагают, что информация в вызовах сервисов является последней (актуальной) информацией. Как следствие, явное отслеживание версий часто не входит в сервисный вызов. Однако если ресурсы в сервисном вызове затем требуется использовать RESTful-образом, явное отслеживание версий и даты последнего изменения сделает это последующее использование намного эффективнее.
</p>
<p>
Сервисы, которые обмениваются ресурсами, ДОЛЖНЫ включать информацию о версии при обмене ресурсами.
</p>

<p><b>Capability Statement</b></p>
<p>
При использовании <a href="http.html">RESTful-обмена</a>, <a href="messaging.html">обмена сообщениями</a> и обмена <a href="documents.html">на основе документов</a>, <a href="conformance.html">заявление о соответствии</a> позволяет 
authoring и reading приложениям описывать, как они используют ресурс. Заявление о соответствии поддерживает согласование торговых партнеров от времени спецификации до обнаружения времени выполнения. Заявление о соответствии не предоставляет какого-либо эквивалентного способа  делать объявления о сервисах, хотя это могло бы быть добавлено в будущем, если возникнут общие требования. Как ожидается, сервисы примут надлежащие меры по открытию и совместимости, хотя ожидается, что они будут значительно отличаться. 
</p>
<p>
Сервисы, которые обмениваются ресурсами, МОГУТ предоставлять поддержку для описания и изменения описания реализаций сервисов.
</p>

<a name="architecture"> </a>
<h2>Architectural Considerations</h2>
<p>
FHIR-ресурсы созданы для использования в широком разнообразии контекстов. В частности, от FHIR-ресурсов требуется подходить для использования в среде REST. Это означает, что есть ряд конструктивных требований и вариантов, которые влияют на то, насколько ресурсы подходят для использования с сервисами.
</p>
<p>
Если бы использование услуг было единственным соображением, принимались бы другие решения, и ресурсы были бы более подходящими для использования с сервисами. Однако это сократило бы их полезность и возможность многократного использования в других контекстах.
</p>

<p><b>Resource References</b></p>
<p>
Наиболее очевидным влиянием было то, что ресурсы <a href="references.html">ссылаются друг на друга с помощью ссылок, основанных на полном URL</a>, и существует целый ряд правил разрешения этих ссылок. В контексте сервиса это означает, что ссылки между модулями несут этот дополнительный вес выбора и обязательства, даже когда в нем может не быть необходимости.
</p>

<p><b>Explicit State</b></p>
<p>
Все ресурсы представляют различные состояния записи и реальных объектов, участвующих в транзакции в явном виде. Это необходимо для использования в RESTful и контекстах документов, где нет явной транзакции. Сервисные взаимодействия, как правило, связаны с неявной семантикой - например запрос на изменение статуса конкретного ресурса на что-то ещё. Тот факт, что ресурсы хранят это состояние явно, так же как транзакция, фиксирующая состояние, неявно создает дублирование между ними, и этим необходимо будет управлять.
</p>

<p><b>Modularity</b></p>
<p>
Модульность ресурсов - какие ресурсы будут определены и почему - управляется широким набором соображений о том, как они используются. Ресурсы являются платформой по предоставлению множества бизнес/клинических услуг различного вида. Соответственно, ресурсы определяются для общего использования, и ожидается, что они будут меньше подходить для конкретной услуги, чем пользовательские структуры. Это окупится более широким повторным использованием информации, с которой  имеет дело сервис.
</p>




</div>

[%file newfooter%]
</body>
</html>
