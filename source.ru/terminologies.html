<!DOCTYPE HTML>


      
[%settitle Использование кодов и справочников%]
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
[%file newheader%]
</head>
<body>
[%file newnavbar%]

<div class="col-9">

<%txheader%>

<h1>Использование кодов в ресурсах</h1>

<a name="bindings"> </a>
<p>
Многие ресурсы в FHIR имеют <b>кодированное значение</b>: некоторая фиксированная строка 
(последовательность символов), определенная где-то в другом месте, которая соответствует некоторому  "концепту". Эта последовательность символов и ее значение могут быть определены в одном из следующих мест:
</p>
<ul>
 <li>Как одно из набора фиксированных значений, приведенных в этой спецификации</li>
 <li>В информационных документах Интернета RFC (например MIME-тип, язык)</li>
 <li>В источнике, определенном HL7 (кодовая система v3 или таблица v2)</li>
 <li>Во внешних справочниках или онтологиях, таких как <a href="http://loinc.org">LOINC</a>, <a href="http://www.ihtsdo.org">SNOMED CT</a></li>
 <li>В локально сохраненном словаре, таблице поиска или перечне в приложении</li>
</ul>
<p>
Все эти способы определения кодов в совокупности называются "кодовыми системами". Этот список далеко не полон; есть много способов определения кодовых систем, и они отличаются друг от друга по сложности и размеру.
</p>
<p>
В описании стандарта кодированные значения всегда указываются парой "система − код", где система − это URL на кодовую систему, содержащую определение кода.
</p>
<p>
Подход FHIR к использованию кодированных значений основывается на базовой структуре, введенной в разделе 5 документа <a href="http://www.hl7.org/documentcenter/public/standards/V3/core_principles/infrastructure/coreprinciples/v3modelcoreprinciples.html">Основополагающие принципы HL7 v3</a>.
</p>
<p>
Если в ресурсах содержатся коды, то используется один из трех типов данных:
</p>
<table class="grid">
 <tr><td><a href="datatypes.html#code">code</a></td><td>Экземпляр объекта этого типа представляет собой только <i>код</i>. Информация о <i>системе</i> содержится в определении самого элемента и не указывается в экземпляре. </td></tr>
 <tr><td><a href="datatypes.html#Coding">Coding</a></td><td>Тип данных, состоящий из двух элементов: <i>код</i> и <i>система</i>. Последний идентифицирует источник определения значения кода.</td></tr>
 <tr><td><a href="datatypes.html#CodeableConcept">CodeableConcept (Кодируемый Концепт)</a></td><td>Тип, представляющий концепт с помощью обычного текста и/или одного или нескольких <i>Codings</i></td></tr>
</table>


<h2>Контроль за использованием кодированных значений</h2>
<p>
Множество кодированных значений, которые разрешено использовать в элементах одного из этих трех типов данных, называется <a href="valueset.html">"value set"</a> (набор значений). Везде, где используются эти типы данных, спецификация связывает соответствующий набор значений с элементом. Способ, которым это делается, различается для простого типа данных <a href="datatypes.html#code">code</a> и сложных типов данных (<a href="datatypes.html#Coding">Coding</a>/<a href="datatypes.html#CodeableConcept">CodeableConcept</a>).
<p>
Разница между кодовой системой и набором значений является существенным различием, которое часто упускается при реализации, так как строгое различение часто воспринимается как само собой разумеющееся в конструкции системы. К примеру, не редкость увидеть системную таблицу, состоящую из смешанных кодов, содержащую некоторые LOINC-коды, а также некоторые дополнительные собственные коды. Довольно часто между ними нет явного различия; тот факт, что код выглядит похожим на LOINC-код, не изменяет его происхождения.
<!-- 
The difference between a code system and a value set is an important distinction that is often
missed by implementers, since strict differentiation is often taked for granted in system
design. For instance, it's not unusual to see a system table that is a mixed list of codes,
containing some LOINC codes and also some additional in-house codes. Quit often, there is 
no explicit differentiation between them; only the fact that a code happens to look like a 
LOINC code betrays its origin.
 --> 
</p>
<p>
В FHIR, с другой стороны, явное отслеживание источника кода является и важным, и необходимым.
Для того чтобы сделать это, каждой кодовой системе, определяющей коды, присваивается URL, который идентифицирует её, и все коды, которые она определяет, по сути являются парами ("Code Pair":  имя с пространством имён). Так, в случае того примера со смешанным списком имеются две кодовые системы:  <a href="loinc.html">LOINC</a> (http://loinc.org) и локальная система (скажем, она имеет следующий URL: http://example.com/codesystems/additional-test-codes).
Системная таблица - это единый набор значений (набор кодированных пар Code Pairs), включающий в себя коды из каждого из этих двух пространств имён. Сам набор значений получает свой собственный URL в качестве идентификатора (например "http://example.com/fhir/ValueSet/test-codes)") - он идентифицирует набор кодированных пар (Code Pairs), но никогда не используется в качестве пространства имён в самой кодированной паре или экземпляре.
В FHIR кодированные пары (Code Pairs) всегда представляются в виде пары "code" и "system", за исключением простого <a href="datatypes.html#code">типа данных "code"</a>, в котором пространство имён (например элемент/свойство system) фиксировано в схеме и не представляется явно. Так что URL в элементе system всегда является ссылкой на кодовую систему, а не на набор значений.
</p>
</p>

<a name="simple"> </a>
<a name="code"> </a>
<h3>Простой тип данных Code</h3>
<p>
Простые элементы с типом данных <a href="datatypes.html#code">code</a> либо привязаны к набору значений, содержащему список отдельных кодов с указанием соответствующей системы (и версии, где необходимо), либо этот элемент привязан к другому внешнему стандарту, в котором определен набор допустимых кодов, которые могу быть использованы (типичными примерами таких отсылок являются <a href="http://www.rfc-editor.org/bcp/bcp13.txt">MIME-типы</a>, 
<a href="http://tools.ietf.org/html/bcp47">коды языков</a>, <a href="http://unitsofmeasure.org">Unified Code for Units of Measure − Система единых кодов для единиц измерений</a>).
</p>
<p>
В любом случае значением элемента должен быть один из кодов, определенных в наборе значений или стандарте, на который есть ссылка.
</p>
<p>
Обратите внимание на дополнительные правила относительно этих кодов:
</p>
<ul>
 <li>Там, где набор значений определен стандартом FHIR, список допустимых кодов будет зафиксирован  в XML-схеме
 </li>
 <li>Сравнение между кодами всегда чувствительно к регистру, если только эти коды не берутся из другой спецификации, где явно указано иное
 </li>
 <li>Список разрешенных кодов может быть расширен только в последующих версиях спецификации FHIR
</li>
 <li><a href="profile.html">Профили</a>, описывающие каким образом ресурс используется в определенном контексте, могут устанавливать правила использования кодов, но не могут вводить новые или дополнительные коды</li>
</ul>

<a name="complex"> </a>
<a name="codeable"> </a>
<h3>Сложные типы кодированных данных</h3>
<p>
Элементы с типом <a href="datatypes.html#CodeableConcept">CodeableConcept</a> или <a href="datatypes.html#Coding">Coding</a> привязаны к набору значений, определяющему список кодированных значений, которые могут быть использованы. Из-за размера и сложности этих наборов значений схемы не используются для обеспечения правильного использования допустимых кодированных значений. Вместо этого формальные определения наборов значений предоставляются с помощью ресурса <a href="valueset.html">Value Set</a> и каскадного набора правил для управления тем, насколько жестко фактические кодированные значения привязаны к набору значений. В базовой спецификации FHIR эта привязка может быть "неполной" или "примерной".
 </p>

<a name="incomplete"> </a>
<h4>Неполные привязки</h4>
<p>
Неполные привязки используются, когда имеется соглашение на уровне спецификации о кодовых значениях, которые должны использоваться. Для таких привязок:
</p>
<ul>
 <li><b>Coding</b>: значения <i>система</i>/<i>код</i> ДОЛЖНЫ быть из набора значений. </li>
 <li><b>CodeableConcept</b>: один из <i>кодируемых</i> элементов ДОЛЖЕН содержать <i>систему</i>/<i>код</i> из набора значений. </li>
</ul>
<p>
Когда ни одно из набора значений не подходит, другое кодированное значение МОЖЕТ быть использовано или (для CodeableConcept) МОЖЕТ быть предусмотрен альтернативный текст. Разработчики могут выбрать отличные от указанных коды с учетом того, что:
</p>
<ul>
 <li>Лицензирование и правовая политика могут диктовать требования о том, что определенные кодированные значения ДОЛЖНЫ или НЕ ДОЛЖНЫ быть использованы.</li>
 <li>Даже если указанный набор значений может быть использован, спецификация не может учесть все возможные случаи использования заранее.
 </li>
</ul>

<a name="example"> </a>
<h4>Примерные привязки</h4>
<p>
Примерные привязки используются, когда у элемента слишком широкое значение (например <a href="list.html">List</a>.code), или нет соглашения о том, какие коды правильно использовать. Для таких привязок:
</p>
<ul>
 <li><b>Coding</b>: значения <i>система</i>/<i>код</i> МОГУТ быть кодами из набора значений. </li>
 <li><b>CodeableConcept</b>: один из <i>кодируемых</i> элементов  МОЖЕТ содержать <i>систему</i>/<i>код</i>из набора значений. </li>
</ul>
<p>
Некоторое другое кодированное значение МОЖЕТ быть использовано или (для CodeableConcept) МОЖЕТ быть предусмотрен альтернативный текст.
Примерные наборы значений представлены, чтобы помочь разработчикам понять правильное использование элемента. Наборы значений на основе таких кодовых систем, как SNOMED CT, которые имеют строгие условия лицензионного соглашения, будут приводиться только в примерных привязках.
</p>

<h4>Детали реализации</h4>
<p>
Вне зависимости от типа привязки − неполная или примерная − когда используется <a href="profile.html">Профиль</a> для описания частного применения, он может привязать элемент к другому набору значений. Когда профиль переопределяет привязку, он способен гораздо точнее указать, какие именно кодированные значения могут быть использованы для этих элементов (более детальную информацию см. на странице <a href="profile.html#binding">Binding Control</a>).
</p>
<p>
Вообще ожидается, что юрисдикции, проекты и производители будут работать вместе, чтобы выбрать актуальные рабочие наборы значений. Последующие версии FHIR могут заменить примерные наборы значений на полные, если будет достигнуто соглашение.
</p>
<p>
Значения <i>системы</i> всегда чувствительны к регистру. В различных кодовых системах свои собственные правила относительно того, чувствительны ли к регистру или нет коды, которые они определяют. Обратите внимание, что все коды, определенные самим FHIR, чувствительны к регистру и ДОЛЖНЫ быть использованы в приведенном виде (обычно, но не всегда, в нижнем регистре).
</p>
<p>
Привязки, приведенные в спецификации, всегда относятся к тому набору значений, который опубликован в той же версии спецификации. Набор значений может быть ограничен списком перечисленных кодов, или может включать коды по их свойствам вместе с не зависящей от версии ссылкой на их кодовую систему, в этом случае список допустимых концептов может расти или изменяться со временем.
</p>

</div>

[%file newfooter%]
    
</body>
</html>